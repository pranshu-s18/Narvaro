(this.webpackJsonpnarvaro=this.webpackJsonpnarvaro||[]).push([[0],{162:function(e,t,c){},163:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(97),s=c.n(r),a=c(7),o=c(62),i=c(3),l=c(16),j=c(100),d=(c(157),c(2)),b=c.n(d),u=(c(56),c(0));b.a.updateLocale("en-in",{week:{dow:1}});var O="/api",m=["BH1","BH2","BH3","GH","Test"],x=function(e){var t=e.error;return t&&Object(u.jsx)("div",{className:"row mt-3 text-center",children:Object(u.jsx)("div",{className:"alert-danger rounded py-2",children:t.split("\n").map((function(e,t){return Object(u.jsxs)("span",{children:[e,Object(u.jsx)("br",{})]},t)}))})})},h=function(e){var t=e.success,c=e.text,n=e.extraText,r=void 0===n?"":n;return t&&Object(u.jsx)("div",{className:"row mt-3 text-center",children:Object(u.jsxs)("div",{className:"alert-success rounded py-2",children:[c," Successfully",Object(u.jsx)("br",{}),r]})})},f=function(e){var t=e.id,c=e.val,n=e.type,r=void 0===n?"text":n,s=e.focus,a=void 0!==s&&s,o=e.onChange,i=e.text,l=e.css,j=void 0===l?"form-control mb-3":l;return Object(u.jsxs)("div",{className:"form-floating",children:[Object(u.jsx)("input",{id:t,className:j,value:c,required:!0,type:r,autoFocus:a,onChange:o}),Object(u.jsx)("label",{htmlFor:t,children:i})]})},p=function(e,t){for(var c=b()(t).startOf(e),n=[c.toDate()];c.isBefore(b()(t).endOf(e),"date");)n.push(c.add(1,"day").toDate());return n},v=function(e,t,c){var n="week"===e?"w-12":"w-25",r="week"===e?b()().day():b()().date();return Object(u.jsx)("td",{className:n,children:c>=r?Object(u.jsx)("b",{children:"-"}):t?Object(u.jsx)("span",{className:"text-info",children:b()(t).format("hh:mm A")}):Object(u.jsx)("span",{className:"text-danger",children:"A"})},c)},g=function(e){var t=e.children;return Object(u.jsx)("table",{className:"table table-borderless mb-0",children:Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{className:"head",children:t})})})},w=function(e){var t=e.children;return Object(u.jsx)(j.a,{style:{maxHeight:"60vh"},children:Object(u.jsx)("table",{className:"table table-borderless mb-0",children:Object(u.jsx)("tbody",{className:"body",children:t})})})},N=function(e,t,c){return fetch("".concat(O,"/attendance/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},body:c}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},y=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},S=function(){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),fetch("".concat(O,"/logout"),{method:"GET"}).catch((function(e){return console.log(e)}))},k=c(30),C=c(5),D=function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(l.b,{style:{color:e===t?"#2ecc72":"#fff"},className:"nav-link p-3 ".concat(n?"selected":""),to:t,children:c})})},P=Object(i.j)((function(){var e=Object(i.h)(),t=e.state&&e.state.hostel?e.state.hostel:"Hostel";return Object(u.jsx)("div",{children:Object(u.jsx)("ul",{className:"nav nav-tabs bg-dark",children:y()?Object(u.jsxs)(u.Fragment,{children:[D(e.pathname,"/attendance","Attendance",!0),Object(u.jsx)("li",{className:"nav-item",onClick:S,children:Object(u.jsx)(l.b,{className:"nav-link p-3 text-white",to:"/",children:"Logout"})}),Object(u.jsxs)("li",{className:"nav-item custom-dropdown ms-auto",children:[Object(u.jsx)("button",{className:"nav-link text-white p-3",children:t}),Object(u.jsx)("ul",{className:"custom-dropdown-menu bg-dark",children:m.map((function(e,c){var n=t===e?"selected":"";return Object(u.jsx)(l.b,{className:"nav-link custom-dropdown-link ".concat(n),to:{pathname:"/attendance",state:{hostel:e}},children:e},c)}))})]})]}):Object(u.jsxs)(u.Fragment,{children:[D(e.pathname,"/","Login"),D(e.pathname,"/register","Register")]})})})})),T=function(e){var t=e.className,c=void 0===t?"text-white py-4":t,n=e.children;return Object(u.jsxs)("div",{className:"d-flex flex-column",style:{minHeight:"100vh"},children:[Object(u.jsx)(P,{}),Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsx)("div",{className:c,children:n})}),Object(u.jsx)("footer",{className:"bg-dark text-white text-lg-start mt-auto",children:Object(u.jsx)("div",{className:"text-center p-3",style:{backgroundColor:"#1f2326"},children:"Developed by Pranshu Saxena"})})]})},E=function(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(!1),o=Object(C.a)(s,2),l=o[0],j=o[1],d=Object(n.useState)({email:"",password:""}),b=Object(C.a)(d,2),m=b[0],h=b[1],p=m.email,v=m.password,g=Object(i.h)();Object(n.useEffect)((function(){void 0!==g.state&&h({email:g.state.email,password:""})}),[g]);var w=function(e){return function(t){return h(Object(a.a)(Object(a.a)({},m),{},Object(k.a)({},e,t.target.value)))}};return Object(u.jsxs)(T,{title:"Login",className:"py-4",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-md-6 offset-sm-3",children:[Object(u.jsxs)("form",{children:[Object(u.jsx)(f,{id:"email",val:p,type:"email",focus:void 0===g.state,onChange:w("email"),text:"E-Mail ID"}),Object(u.jsx)(f,{id:"pass",val:v,type:"password",focus:void 0!==g.state,onChange:w("password"),text:"Password"}),Object(u.jsx)("button",{className:"btn btn-success btn-block",onClick:function(e){var t;e.preventDefault(),(t={email:p,password:v},fetch("".concat(O,"/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?r(e.error.trim()):function(e,t){"undefined"!==typeof window&&localStorage.setItem("jwt",JSON.stringify(e)),t()}(e,(function(){return j(!0)}))})).catch((function(){return r("Server Error Occurred")}))},children:"Submit"})]}),Object(u.jsx)("div",{className:"mx-2 mt-5",children:Object(u.jsx)(x,{error:c})})]})}),function(){if(l)return Object(u.jsx)(i.a,{to:"/attendance"})}()]})},M=c(17),I=function(){var e=Object(i.g)(),t=Object(n.useState)({name:"",email:"",passwordOne:"",passwordTwo:""}),c=Object(C.a)(t,2),r=c[0],s=c[1],o=r.name,l=r.email,j=r.passwordOne,d=r.passwordTwo,b=Object(n.useState)({error:!1,success:!1}),m=Object(C.a)(b,2),p=m[0],v=m[1],g=p.error,w=p.success,N=Object(n.useState)({P1:!1,P2:!1}),y=Object(C.a)(N,2),S=y[0],D=y[1],P=S.P1,E=S.P2,I=function(e){return function(t){return s(Object(a.a)(Object(a.a)({},r),{},Object(k.a)({},e,t.target.value)))}};return Object(u.jsx)(T,{className:"py-4",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-md-6 offset-sm-3 text-left",children:[Object(u.jsxs)("form",{children:[Object(u.jsx)(f,{id:"name",val:o,focus:!0,onChange:I("name"),text:"Name"}),Object(u.jsx)(f,{id:"email",val:l,type:"email",onChange:I("email"),text:"E-Mail ID"}),Object(u.jsxs)("div",{className:"d-flex flex-row",children:[Object(u.jsxs)("div",{className:"d-flex flex-fill",children:[Object(u.jsx)(f,{id:"pass",val:j,type:P?"text":"password",onChange:I("passwordOne"),text:"Password",css:"form-control mb-3 left-rounded-corners"}),Object(u.jsx)("span",{className:"input-group-text mb-3 right-rounded-corners me-3",style:{cursor:"pointer"},onClick:function(){return D(Object(a.a)(Object(a.a)({},S),{},{P1:!P}))},children:P?Object(u.jsx)(M.d,{}):Object(u.jsx)(M.c,{})})]}),Object(u.jsxs)("div",{className:"d-flex flex-fill",children:[Object(u.jsx)(f,{id:"confirmPass",val:d,type:E?"text":"password",onChange:I("passwordTwo"),text:"Confirm Password",css:"form-control mb-3 left-rounded-corners"}),Object(u.jsx)("span",{className:"input-group-text mb-3 right-rounded-corners",style:{cursor:"pointer"},onClick:function(){return D(Object(a.a)(Object(a.a)({},S),{},{P2:!E}))},children:P?Object(u.jsx)(M.d,{}):Object(u.jsx)(M.c,{})})]})]}),Object(u.jsx)("button",{className:"btn btn-success btn-block",onClick:function(t){var c;t.preventDefault(),j===d?(c={name:o,email:l,password:j},fetch("".concat(O,"/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(t){t.error?v({error:t.error.trim(),success:!1}):(s({name:"",email:"",passwordOne:"",passwordTwo:""}),v({error:!1,success:!0}),setTimeout((function(){return e.push("/",{email:l})}),1e3))})).catch((function(){return console.log("Error in registration")})):v({success:!1,error:"Password and Confirm Password do not match"})},children:"Submit"})]}),Object(u.jsxs)("div",{className:"mx-2 mt-5",children:[Object(u.jsx)(h,{success:w,text:"Registered",extraText:"Redirecting to Login..."}),Object(u.jsx)(x,{error:g})]})]})})})};c(96);b.a.updateLocale("en-in",{week:{dow:1}});var L=function(){var e=y(),t=e.user,c=e.token,r=Object(n.useState)([]),s=Object(C.a)(r,2),a=s[0],o=s[1],j=Object(n.useState)(b()().startOf("week").toDate()),d=Object(C.a)(j,2),O=d[0],m=d[1],x=Object(n.useState)([]),h=Object(C.a)(x,2),f=h[0],S=h[1],k=Object(i.h)(),D=k.state?k.state.hostel:"BH2",P=Object(n.useState)({loading:!0,error:"",server:!1}),E=Object(C.a)(P,2),I=E[0],L=E[1],A=I.loading,H=I.error,J=I.server;Object(n.useEffect)((function(){S(p("week",O))}),[O]),Object(n.useEffect)((function(){L({loading:!0,error:"",server:!1});var e=b()(O),n={hostel:D,startDate:e.toISOString(),endDate:e.endOf("week").toISOString()};N(t._id,c,JSON.stringify(n)).then((function(e){e.error?(L({loading:!1,error:e.error,server:e.server}),o([])):(L({loading:!1,error:"",server:!1}),o(e))}))}),[D,O]);var B=function(){var e=new Array(7).fill(!1);return a.forEach((function(t){return t.attendance.forEach((function(t){return e[b()(t).day()-1]=t}))})),e.map((function(e,t){return v("week",e,t)}))};return Object(u.jsx)(T,{className:"py-5",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"custom-table",children:[Object(u.jsxs)(g,{children:[Object(u.jsxs)("th",{className:"w-18",children:[Object(u.jsx)("span",{className:"float-start ps-1 pe-4",style:{cursor:"pointer"},onClick:function(){b()(O).isSame(b()().startOf("month").startOf("week"))||m(b()(O).subtract(1,"week").toDate())},children:Object(u.jsx)(M.a,{})}),"Roll No"]}),f.map((function(e,t){return Object(u.jsxs)("th",{className:"w-12",children:[b()(e).format("DD MMM"),6===t?Object(u.jsx)("span",{className:"float-end px-1",style:{cursor:"pointer"},onClick:function(){b()(O).isSame(b()().startOf("week"))||m(b()(O).add(1,"week").toDate())},children:Object(u.jsx)(M.b,{})}):Object(u.jsx)(u.Fragment,{})]},t)}))]}),Object(u.jsxs)(w,{children:[a.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"ps-4 w-18",children:Object(u.jsx)(l.b,{className:"text-decoration-none text-warning",to:"/attendance/".concat(e.rollNo),children:e.rollNo})}),B()]},t)})),A&&Object(u.jsx)("tr",{children:Object(u.jsx)("td",{colSpan:8,className:"text-center text-info",children:"Loading..."})}),H&&Object(u.jsx)("tr",{children:Object(u.jsx)("td",{colSpan:8,className:"text-center ".concat(J?"text-danger":"text-info"),children:H})})]})]})})})};b.a.updateLocale("en-in",{week:{dow:1}});var A=function(){var e=y(),t=e.user,c=e.token,r=Object(n.useState)([]),s=Object(C.a)(r,2),a=s[0],o=s[1],l=Object(n.useState)(b()().startOf("month").toDate()),j=Object(C.a)(l,2),d=j[0],O=j[1],m=Object(n.useState)([]),x=Object(C.a)(m,2),h=x[0],f=x[1],S=Object(i.i)().rollNo,k=Object(n.useState)({loading:!0,error:"",server:!1}),D=Object(C.a)(k,2),P=D[0],E=D[1],I=P.loading,L=P.error,A=P.server;Object(n.useEffect)((function(){E({loading:!0,error:"",server:!1});var e=b()(d),n={rollNo:S,startDate:e.toISOString(),endDate:e.endOf("month").toISOString()};N(t._id,c,JSON.stringify(n)).then((function(e){e.error?(E({loading:!1,error:e.error,server:e.server}),o([])):(E({loading:!1,error:"",server:!1}),o(e[0]))})),f(p("month",d))}),[d]);var H;return Object(u.jsx)(T,{className:"py-5",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"custom-table-small mx-auto text-center",children:[Object(u.jsxs)(g,{children:[Object(u.jsxs)("th",{className:"ps-4 w-50",children:[Object(u.jsx)("span",{className:"float-start mx-1",style:{cursor:"pointer"},onClick:function(){b()(d).isSame(b()().startOf("year"))||O(b()(d).subtract(1,"month").toDate())},children:Object(u.jsx)(M.a,{})}),S]}),Object(u.jsxs)("th",{className:"w-50 pe-4",children:[(H=a.hostel,I?"Loading...":L?A?"Error":b()(d).format("MMMM YYYY"):H),Object(u.jsx)("span",{className:"float-end mx-1",style:{cursor:"pointer"},onClick:function(){b()(d).isSame(b()().startOf("month"))||O(b()(d).add(1,"month").toDate())},children:Object(u.jsx)(M.b,{})})]})]}),Object(u.jsxs)(w,{children:[function(e){if(e){var t=new Array(h.length).fill(!1);e.forEach((function(e){return t[b()(e).date()-1]=b()(e)}));var c=function(e,t){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("td",{className:"w-25",children:b()(h[t]).format("DD MMM")}),v("month",e,t)]})};return t.reduce((function(e,c,n){return n%2===0&&e.push(t.slice(n,n+2)),e}),[]).map((function(e,t){return Object(u.jsxs)("tr",{children:[c(e[0],2*t),2===e.length?c(e[1],2*t+1):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("td",{className:"w25"}),Object(u.jsx)("td",{className:"w25"})]})]},t)}))}}(a.attendance),I&&Object(u.jsx)("tr",{children:Object(u.jsx)("td",{colSpan:2,className:"text-center text-info",children:"Loading..."})}),L&&Object(u.jsx)("tr",{children:Object(u.jsx)("td",{colSpan:2,className:"text-center ".concat(A?"text-danger":"text-info"),children:L})})]})]})})})},H=["component"],J=["component"],B=function(e){var t=e.component,c=Object(o.a)(e,H);return Object(u.jsx)(i.b,Object(a.a)(Object(a.a)({},c),{},{render:function(e){return y()?Object(u.jsx)(t,Object(a.a)({},e)):Object(u.jsx)(i.a,{to:"/"})}}))},F=function(e){var t=e.component,c=Object(o.a)(e,J);return Object(u.jsx)(i.b,Object(a.a)(Object(a.a)({},c),{},{render:function(e){return y()?Object(u.jsx)(i.a,{to:"/attendance"}):Object(u.jsx)(t,Object(a.a)({},e))}}))},R=function(){return Object(u.jsx)(l.a,{children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(F,{path:"/",component:E,exact:!0}),Object(u.jsx)(F,{path:"/register",component:I,exact:!0}),Object(u.jsx)(B,{path:"/attendance",component:L,exact:!0}),Object(u.jsx)(B,{path:"/attendance/:rollNo",component:A,exact:!0})]})})};c(162);s.a.render(Object(u.jsx)(R,{}),document.getElementById("root"))},96:function(e,t,c){}},[[163,1,2]]]);
//# sourceMappingURL=main.135a5cad.chunk.js.map